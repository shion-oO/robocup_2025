<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ã‚®ãƒ£ãƒƒãƒ—ãƒ©ã‚¤ãƒ³ãƒˆãƒ¬ãƒ¼ã‚¹</title>
  <style>
    body {
      font-family: 'Helvetica Neue', sans-serif;
      background-color: #f0f4f8;
      margin: 0;
      padding: 0;
      color: #2c3e50;
    }

    header {
      background-color: #3498db;
      color: white;
      padding: 20px;
      text-align: center;
    }

    h1 {
      margin: 0;
      font-size: 2em;
    }

    nav {
      background-color: #ecf0f1;
      padding: 10px 20px;
      text-align: center;
    }

    nav a {
      color: #3498db;
      text-decoration: none;
      margin: 0 15px;
      font-weight: bold;
    }

    nav a:hover {
      text-decoration: underline;
    }

    main {
      padding: 40px 20px;
      max-width: 1200px;
      margin: 0 auto;
      background-color: #ffffff;
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }

    video {
      width: 100%;
      max-width: 640px;
      border-radius: 10px;
      display: block;
      margin: 0 auto;
    }

    .caption {
      margin-top: 12px;
      font-size: 16px;
      color: #444;
      text-align: center;
    }

    h2 {
      color: #3498db;
      border-bottom: 2px solid #3498db;
      padding-bottom: 5px;
      margin-top: 40px;
    }

    .code-section {
      display: flex;
      gap: 20px;
      margin-top: 20px;
      margin-bottom: 60px;
      flex-wrap: wrap;
    }

    .code-box {
      flex: 1;
      min-width: 400px;
      background: #f7f9fb;
      border-radius: 10px;
      padding: 20px;
      overflow-x: auto;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    pre {
      margin: 0;
      font-family: 'Courier New', monospace;
      font-size: 14px;
      line-height: 1.5;
      color: #333;
    }

    .desc-box {
      flex: 1;
      min-width: 400px;
      background: #eaf4fc;
      border-radius: 10px;
      padding: 20px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    .desc-box p {
      margin-bottom: 10px;
      line-height: 1.6;
    }

    /* â–¼ å­¦ç¿’ã‚»ã‚¯ã‚·ãƒ§ãƒ³ â–¼ */
    .learn-section {
      margin-top: 60px;
      background-color: #f7f9fb;
      padding: 40px 30px;
      border-radius: 10px;
      box-shadow: 0 3px 8px rgba(0,0,0,0.1);
    }

    .learn-section h2 {
      text-align: center;
      font-size: 1.8em;
      color: #3498db;
      border-bottom: none;
      margin-bottom: 20px;
    }

    .learn-section p {
      font-size: 1.1em;
      line-height: 1.8;
      color: #2c3e50;
      margin-bottom: 15px;
    }

    .learn-list {
      list-style: decimal;
      padding-left: 25px;
      font-size: 1.05em;
      line-height: 1.8;
    }

    /* ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°å…¨ä½“ */
.trouble-section {
   display: flex;       /* å­è¦ç´ ã‚’æ¨ªä¸¦ã³ã«ã™ã‚‹ */
  flex-wrap: wrap;     /* ç”»é¢å¹…ãŒç‹­ã‘ã‚Œã°æŠ˜ã‚Šè¿”ã™ */
  gap: 20px;  
}

.trouble-box-container {
  display: flex;       /* å­è¦ç´ ã‚’æ¨ªä¸¦ã³ã«ã™ã‚‹ */
  flex-wrap: wrap;     /* ç”»é¢å¹…ãŒç‹­ã‘ã‚Œã°æŠ˜ã‚Šè¿”ã™ */
  gap: 20px;           /* ãƒœãƒƒã‚¯ã‚¹åŒå£«ã®éš™é–“ */
}

.trouble-box {
  flex: 1 1 300px;     /* æœ€å°å¹…300pxã€ä½™è£•ãŒã‚ã‚Œã°æ¨ªå¹…æ‹¡å¼µ */
  background: #f7f9fb;
  padding: 20px;
  border-radius: 10px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.08);
}

.trouble-box h3 {
  margin-top: 0;
  color: #3498db;
  font-size: 1.2em;
}

.menu-icon {
      position: fixed;
      top: 20px;
      left: 20px;
      cursor: pointer;
      z-index: 2000;
      width: 30px;
      height: 25px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }
    .menu-icon div {
      height: 4px;
      background-color: #2c3e50;
      border-radius: 5px;
      transition: 0.3s ease;
    }
    .menu-icon.open div:nth-child(1) { transform: translateY(10px) rotate(45deg); }
    .menu-icon.open div:nth-child(2) { opacity: 0; }
    .menu-icon.open div:nth-child(3) { transform: translateY(-10px) rotate(-45deg); }

   /* ã‚µã‚¤ãƒ‰ãƒãƒ¼ã‚’å·¦ã«å›ºå®š */
  .sidebar {
      position: fixed;
      top: 0;
      left: -300px;
      width: 250px;
      height: 100%;
      background-color: rgba(255, 255, 255, 0.9);
      box-shadow: 4px 0 12px rgba(0, 0, 0, 0.1);
      padding: 20px;
      transition: left 0.3s ease-in-out;
      z-index: 999;
    }

    .sidebar.open {
      left: 0;
    }


        /* ã‚µã‚¤ãƒ‰ãƒãƒ¼æŠ˜ã‚ŠãŸãŸã¿ã‚µãƒ–ãƒ¡ãƒ‹ãƒ¥ãƒ¼ */
    #rule-submenu {
      list-style-type: none;
      padding-left: 15px;
      margin-top: 5px;
    }

    #rule-submenu li {
      margin-bottom: 10px;
    }

    #rule-submenu li a {
      font-weight: bold;
      font-size: 1.1em;
      color: #2c3e50;
    }

    #rule-submenu li a:hover {
      color: #3498db;
      transform: none;
    }

    /* æŠ˜ã‚ŠãŸãŸã¿å…¨ä½“ */
details {
  margin-bottom: 10px;
}

/* æŠ˜ã‚ŠãŸãŸã¿ã‚¿ã‚¤ãƒˆãƒ«ï¼ˆã¯ã˜ã‚ã«ï¼ãƒ«ãƒ¼ãƒ«ï¼å®Ÿè·µï¼‰ */
summary {
  cursor: pointer;
  font-weight: bold;
  font-size: 18px; /* â† æ–‡å­—ã‚µã‚¤ã‚ºã‚’ãƒ«ãƒ¼ãƒ«ã‚¿ã‚¤ãƒˆãƒ«ã¨åŒã˜ã« */
  color: #333;
  padding: 6px 0;
  list-style: none; /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®â–¼ãƒãƒ¼ã‚¯ã‚’æ¶ˆã™ */
  border-bottom: 1px solid #ddd;
}

/* summaryã®æ¨ªã«è‡ªä½œã®â–½ã‚¢ã‚¤ã‚³ãƒ³ã‚’è¿½åŠ  */
summary::after {
  content: " â–½";
  font-weight: normal;
}

/* é–‹ã„ã¦ã„ã‚‹æ™‚ã¯â–½ã‚’â–²ã«å¤‰æ›´ */
details[open] summary::after {
  content: " â–²";
}

/* ã‚µãƒ–ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®ãƒªãƒ³ã‚¯ */
details ul {
  margin-left: 20px;
  list-style: none;
  padding-left: 0;
}

details ul li {
  margin: 4px 0;
}

details ul li a {
  text-decoration: none;
  color: #333;
  font-size: 16px;
}

details ul li a:hover {
  text-decoration: underline;
}




         /* å³ä¸Šã®æ¬¡ã¸ãƒœã‚¿ãƒ³ */
    #nextButton {
      position: fixed;
      top: 20px;
      right: 20px;
      background-color: #4CAF50;
      color: white;
      padding: 10px 20px;
      border-radius: 8px;
      text-decoration: none;
      font-weight: bold;
      box-shadow: 0 3px 6px rgba(0,0,0,0.2);
      z-index: 2000;
      transition: 0.3s;
    }

    #nextButton:hover {
      background-color: #2980b9;
    }

        footer {
      text-align:center;
      padding:20px;
      background-color:#ecf0f1;
      margin-top:20px;
      border-radius:6px;
    }


  </style>

<script>
    function toggleMenu() {
      const sidebar = document.getElementById('sidebar');
      const menuIcon = document.querySelector('.menu-icon');
      sidebar.classList.toggle('open');
      menuIcon.classList.toggle('open');
    }

    function toggleRuleMenu(event) {
      event.preventDefault();
      const submenu = document.getElementById('rule-submenu');
      submenu.style.display = submenu.style.display === 'block' ? 'none' : 'block';
    }

    window.addEventListener('DOMContentLoaded', () => {
      const title = "ãƒ­ãƒœã‚«ãƒƒãƒ—ã‚¸ãƒ¥ãƒ‹ã‚¢ ãƒ¬ã‚¹ã‚­ãƒ¥ãƒ¼ãƒ©ã‚¤ãƒ³å…¥é–€";
      let i = 0;
      function typeWriter() {
        if (i < title.length) {
          document.getElementById("main-title").textContent += title.charAt(i);
          i++;
          setTimeout(typeWriter, 100);
        }
      }
      typeWriter();
    });
    </script>

</head>
<body>


  
  <div class="wrapper">

  <!-- ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ -->
  <div class="menu-icon" id="menuIcon" onclick="toggleMenu()">
    <div></div><div></div><div></div>
  </div>

  <!-- ã‚µã‚¤ãƒ‰ãƒãƒ¼ -->
  <nav class="sidebar" id="sidebar">
    <ul>
      <li>
        <details>
          <summary>ã¯ã˜ã‚ã«</summary>
          <ul>
            <li><a href="robocup_home.html">ãƒ­ãƒœã‚«ãƒƒãƒ—ã‚¸ãƒ¥ãƒ‹ã‚¢ã«ã¤ã„ã¦</a></li>
          </ul>
        </details>
      </li>
      <li>
        <details>
          <summary>1. ãƒ«ãƒ¼ãƒ«</summary>
          <ul>
            <li><a href="gaiyou.html">æ¦‚è¦</a></li>
            <li><a href="koudoukihann.html">è¡Œå‹•è¦ç¯„</a></li>
            <li><a href="field.html">ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰</a></li>
            <li><a href="robot.html">ãƒ­ãƒœãƒƒãƒˆ</a></li>
            <li><a href="kyougi.html" style="color:#3498db;">ç«¶æŠ€</a></li>
          </ul>
        </details>
      </li>
      <li>
        <details>
          <summary>2. å®Ÿè·µ</summary>
          <ul>
            <li><a href="linetrace.html">ç™½é»’ãƒ©ã‚¤ãƒ³ãƒˆãƒ¬ãƒ¼ã‚¹</a></li>
            <li><a href="linetrace2.html">äº¤å·®ç‚¹ä»˜ããƒ©ã‚¤ãƒ³ãƒˆãƒ¬ãƒ¼ã‚¹</a></li>
            <li><a href="linetrace3.html">ã‚®ãƒ£ãƒƒãƒ—ãƒ©ã‚¤ãƒ³ãƒˆãƒ¬ãƒ¼ã‚¹</a></li>
            <li><a href="goal.html">ã‚´ãƒ¼ãƒ«ã‚¿ã‚¤ãƒ«</a></li>
            <li><a href="speedbanmp.html">ã‚¹ãƒ”ãƒ¼ãƒ‰ãƒãƒ³ãƒ—</a></li>
            <li><a href="syougaibutu.html">éšœå®³ç‰©</a></li>
            <li><a href="gareki.html">ç“¦ç¤«</a></li>
            <li><a href="seesaw.html">ã‚·ãƒ¼ã‚½ãƒ¼</a></li>
            <li><a href="keisyaro.html">å‚¾æ–œè·¯</a></li>
            <li><a href="ball1.html">ãƒœãƒ¼ãƒ«æ¤œçŸ¥ã®å­¦ç¿’</a></li>
            <li><a href="blackball.html">é»’è‰²ãƒœãƒ¼ãƒ«</a></li>
            <li><a href="silverball.html">éŠ€è‰²ãƒœãƒ¼ãƒ«</a></li>
          </ul>
        </details>
      </li>
    </ul>
  </nav>

    <!-- å³ä¸Šå›ºå®š æ¬¡ã¸ãƒœã‚¿ãƒ³ -->
  <a href="goal.html" id="nextButton">æ¬¡ã¸ â†’</a>

  <header>
    <h1>ã‚®ãƒ£ãƒƒãƒ—ãƒ©ã‚¤ãƒ³ãƒˆãƒ¬ãƒ¼ã‚¹</h1>
  </header>

  <nav>
    <a href="robocup_home.html">ãƒ›ãƒ¼ãƒ </a>
    <a href="linetrace.html">ç™½é»’ãƒ©ã‚¤ãƒ³ãƒˆãƒ¬ãƒ¼ã‚¹</a>
    <a href="linetrace2.html">äº¤å·®ç‚¹ä»˜ããƒ©ã‚¤ãƒ³ãƒˆãƒ¬ãƒ¼ã‚¹</a>
    <a href="goal.html">ã‚´ãƒ¼ãƒ«ã‚¿ã‚¤ãƒ«</a>
  </nav>

  <main>
    <video controls>
     <!-- <source src="linetrace.mp4" type="video/mp4"> -->
      <source src="jyuugi_aki.mp4" type="video/mp4"> 
      ãŠä½¿ã„ã®ãƒ–ãƒ©ã‚¦ã‚¶ã¯å‹•ç”»å†ç”Ÿã«å¯¾å¿œã—ã¦ã„ã¾ã›ã‚“ã€‚
    </video>
    <div class="caption">
      <p>ãƒ­ãƒœãƒƒãƒˆãŒã‚®ãƒ£ãƒƒãƒ—ã®ã‚ã‚‹ãƒ©ã‚¤ãƒ³ã«æ²¿ã£ã¦èµ°è¡Œã™ã‚‹æ§˜å­ã‚’æ’®å½±ã—ãŸå‹•ç”»ã§ã™ã€‚
      <br>ã“ã®èµ°è¡Œã¯ã€ç™½é»’ãƒ©ã‚¤ãƒ³ãƒˆãƒ¬ãƒ¼ã‚¹ã¨åŒã˜ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚³ãƒ¼ãƒ‰ã§å®Ÿè¡Œã—ã¦ãŠã‚Šã€ã‚®ãƒ£ãƒƒãƒ—ãŒã‚ã£ã¦ã‚‚å®‰å®šã—ã¦ãƒ©ã‚¤ãƒ³ã‚’è¿½å¾“ã—ã¦ã„ã¾ã™ã€‚
      <br>ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã§ã¯ã€ãƒ©ã‚¤ãƒ³ãƒˆãƒ¬ãƒ¼ã‚¹ã®åŸºæœ¬çš„ãªå‡¦ç†ã®æµã‚Œã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚
      <br>ã¾ãŸã€èµ°è¡Œã‚’å®‰å®šã•ã›ã‚‹ãŸã‚ã®å…·ä½“çš„ãªæ”¹å–„ãƒ’ãƒ³ãƒˆã‚‚ã¾ã¨ã‚ã¦ã„ã¾ã™ã®ã§ã€ãœã²å‚è€ƒã«ã—ã¦ãã ã•ã„ã€‚</p>

    </div>

    <h2>linetrace.py</h2>
    <div class="code-section">
      <div class="code-box">
        <pre><code># OpenCVãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ç”¨ã—ã¦ç”»åƒå‡¦ç†ã‚’è¡Œã†ãŸã‚ã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆ

# â‘  æœ€åˆã®éƒ¨åˆ†ï¼ˆãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®èª­ã¿è¾¼ã¿ï¼‰
import cv2
import numpy as np
from picamera2 import Picamera2
from etrobo_python import ETRobo, Motor
import time

# â‘¡ ã‚«ãƒ¡ãƒ©ã®è¨­å®š
cam0 = Picamera2(0)
cam0.configure(cam0.create_preview_configuration(main={"format": 'XRGB8888', "size": (320, 240)}))
cam0.start()
time.sleep(1)

cam1 = Picamera2(1)
cam1.configure(cam1.create_preview_configuration(main={"format": 'XRGB8888', "size": (320, 240)}))
cam1.start()
time.sleep(1)

# â‘¢ å‰å›ã®æ–¹å‘ã‚’è¨˜æ†¶ã™ã‚‹å¤‰æ•°
last_direction = "CENTER"

# â‘£ é»’ã„ç·šã‚’è¦‹ã¤ã‘ã‚‹é–¢æ•°ï¼ˆget_directionï¼‰
def get_direction(frame, last_direction):
    hsv = cv2.cvtColor(frame, cv2.COLOR_RGB2HSV)
    lower_black = (0, 0, 0)
    upper_black = (180, 255, 80)
    mask = cv2.inRange(hsv, lower_black, upper_black)
    mask = cv2.GaussianBlur(mask, (5, 5), 0)
    height, width = mask.shape
    roi_bottom = mask[height-40:height, :]
    contours, _ = cv2.findContours(roi_bottom, cv2.RETR_EXTERNAL, cv2.CHAIN_APPROX_SIMPLE)
    direction = last_direction
    if contours:
        cx = np.mean([cv2.moments(c)["m10"]/cv2.moments(c)["m00"] for c in contours if cv2.moments(c)["m00"] != 0])
        if cx < width//2 - 20:
            direction = "LEFT"
        elif cx > width//2 + 20:
            direction = "RIGHT"
        else:
            direction = "CENTER"
    return direction

# â‘¤ ãƒ¢ãƒ¼ã‚¿ãƒ¼ã‚’å‹•ã‹ã™é–¢æ•°
def line_trace_by_camera(right_motor: Motor, left_motor: Motor, **kwargs):
    global last_direction
    try:
        frame0 = cam0.capture_array()
        direction = get_direction(frame0, last_direction)
        last_direction = direction
        print("é€²è¡Œæ–¹å‘:", direction)
        base_speed = 90 if direction == "CENTER" else 50
        diff = 55
        if direction == "LEFT":
            right_motor.set_power(base_speed + diff)
            left_motor.set_power(base_speed - diff)
        elif direction == "RIGHT":
            right_motor.set_power(base_speed - diff)
            left_motor.set_power(base_speed + diff)
        else:
            right_motor.set_power(base_speed)
            left_motor.set_power(base_speed)
    except Exception as e:
        print("ã‚¨ãƒ©ãƒ¼:", e)

# â‘¥ ãƒ¡ã‚¤ãƒ³ã®éƒ¨åˆ†ï¼ˆãƒ­ãƒœãƒƒãƒˆã‚’å‹•ã‹ã™è¨­å®šï¼‰
if __name__ == "__main__":
    robo = (ETRobo(backend='raspike_art')
            .add_device('right_motor', device_type=Motor, port='A')
            .add_device('left_motor', device_type=Motor, port='B')
            .add_handler(line_trace_by_camera))
    robo.dispatch(interval=0.05)
</code></pre>
      </div>

      <div class="desc-box">
        <h3>(ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®èª¬æ˜)</h3>
        <p>ã“ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¯ã€ã€Œã‚«ãƒ¡ãƒ©ã§é»’ã„ç·šï¼ˆãƒ©ã‚¤ãƒ³ï¼‰ã‚’è¦‹ã¤ã‘ã¦ã€ãã®ç·šã«æ²¿ã£ã¦ãƒ­ãƒœãƒƒãƒˆã‚’èµ°ã‚‰ã›ã‚‹ã€ã‚‚ã®ã§ã™ã€‚Raspberry Pi ã«æ¥ç¶šã•ã‚ŒãŸã‚«ãƒ¡ãƒ©ã§åºŠã®æ˜ åƒã‚’å–ã‚Šè¾¼ã¿ã€ç”»åƒå‡¦ç†ã‚’ä½¿ã£ã¦é»’ã„ç·šã®ä½ç½®ã‚’èª¿ã¹ã€ãƒ­ãƒœãƒƒãƒˆã®ãƒ¢ãƒ¼ã‚¿ãƒ¼ã‚’å·¦å³ã§èª¿æ•´ã—ãªãŒã‚‰é€²è¡Œæ–¹å‘ã‚’æ±ºã‚ã¦ã„ã¾ã™ã€‚</p>

  <h4>â‘  æœ€åˆã®éƒ¨åˆ†ï¼ˆãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®èª­ã¿è¾¼ã¿ï¼‰</h4>
  <p>ã“ã“ã§ã¯ã€å¿…è¦ãªé“å…·ï¼ˆãƒ©ã‚¤ãƒ–ãƒ©ãƒªï¼‰ã‚’ä½¿ãˆã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚</p>
  <ul>
    <li><b>cv2ï¼ˆOpenCVï¼‰</b>ï¼šç”»åƒã‚’æ‰±ã†ãŸã‚ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚è‰²ã‚’å¤‰ãˆãŸã‚Šã€è¼ªéƒ­ã‚’è¦‹ã¤ã‘ãŸã‚Šã§ãã¾ã™ã€‚</li>
    <li><b>numpyï¼ˆnpï¼‰</b>ï¼šæ•°ã®è¨ˆç®—ã‚’ä¾¿åˆ©ã«ã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚</li>
    <li><b>Picamera2</b>ï¼šRaspberry Pi ã«æ¥ç¶šã—ãŸã‚«ãƒ¡ãƒ©ã‚’æ“ä½œã—ã¾ã™ã€‚</li>
    <li><b>ETRobo / Motor</b>ï¼šãƒ­ãƒœãƒƒãƒˆã‚„ãƒ¢ãƒ¼ã‚¿ãƒ¼ã‚’åˆ¶å¾¡ã™ã‚‹ãŸã‚ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚</li>
    <li><b>time</b>ï¼šå°‘ã—å¾…ã¤ï¼ˆã‚¹ãƒªãƒ¼ãƒ—ï¼‰æ©Ÿèƒ½ã‚’ä½¿ã†ãŸã‚ã«èª­ã¿è¾¼ã‚“ã§ã„ã¾ã™ã€‚</li>
  </ul>

  <h4>â‘¡ ã‚«ãƒ¡ãƒ©ã®è¨­å®š</h4>
  <p>ã“ã“ã§ã¯ã€2å°ã®ã‚«ãƒ¡ãƒ©ã‚’è¨­å®šã—ã¦ã„ã¾ã™ã€‚</p>
  <ul>
    <li><code>Picamera2(0)</code> ã¯1å°ç›®ã®ã‚«ãƒ¡ãƒ©ã€<code>Picamera2(1)</code> ã¯2å°ç›®ã®ã‚«ãƒ¡ãƒ©ã§ã™ã€‚</li>
    <li><code>size=(320, 240)</code> ã¯ç”»é¢ã®å¤§ãã•ï¼ˆè§£åƒåº¦ï¼‰ã§ã€ç”»åƒå‡¦ç†ã‚’é€Ÿãã—ã¦ã„ã¾ã™ã€‚</li>
    <li><code>time.sleep(1)</code> ã¯ã€Œ1ç§’å¾…ã¤ã€ã¨ã„ã†æ„å‘³ã§ã€ã‚«ãƒ¡ãƒ©ãŒå®‰å®šã™ã‚‹ã¾ã§å¾…ã£ã¦ã„ã¾ã™ã€‚</li>
  </ul>
  <p>â€»1å°ã—ã‹ã‚«ãƒ¡ãƒ©ã‚’ä½¿ã£ã¦ã„ãªã„å ´åˆã¯ã€<code>cam1</code> ã®è¨­å®šéƒ¨åˆ†ã‚’å‰Šé™¤ã—ã¦ã‚‚å‹•ä½œã—ã¾ã™ã€‚</p>

  <h4>â‘¢ å‰å›ã®æ–¹å‘ã‚’è¨˜æ†¶ã™ã‚‹å¤‰æ•°</h4>
  <p>å‰å›ã®é€²è¡Œæ–¹å‘ï¼ˆå·¦ãƒ»å³ãƒ»ä¸­å¤®ï¼‰ã‚’è¦šãˆã¦ãŠããŸã‚ã®å¤‰æ•°ã§ã™ã€‚ç·šã‚’ä¸€æ™‚çš„ã«è¦‹å¤±ã£ã¦ã‚‚ã€æœ€å¾Œã®æ–¹å‘ã‚’æ€ã„å‡ºã›ã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚</p>

  <h4>â‘£ é»’ã„ç·šã‚’è¦‹ã¤ã‘ã‚‹é–¢æ•°ï¼ˆget_directionï¼‰</h4>
  <p>ã“ã®é–¢æ•°ã§ã¯ã€ã‚«ãƒ¡ãƒ©ã§æ’®ã£ãŸç”»åƒã‹ã‚‰é»’ã„ç·šã®ä½ç½®ã‚’è¦‹ã¤ã‘ã¦ã€ã€Œç·šãŒå·¦ã«ã‚ã‚‹ã‹ãƒ»ä¸­å¤®ã«ã‚ã‚‹ã‹ãƒ»å³ã«ã‚ã‚‹ã‹ã€ã‚’åˆ¤æ–­ã—ã¦ã„ã¾ã™ã€‚</p>

  <ol>
    <li><b>è‰²ã®å¤‰æ›ï¼š</b> RGBã‹ã‚‰HSVã«å¤‰æ›ã—ã€é»’ã„éƒ¨åˆ†ã‚’è¦‹ã‚„ã™ãã—ã¾ã™ã€‚</li>
    <li><b>é»’ã ã‘ã‚’å–ã‚Šå‡ºã™ï¼š</b> æ˜ã‚‹ã•ãŒ0ã€œ80ã®éƒ¨åˆ†ã ã‘ã‚’ç™½ãã—ã€é»’ã„ç·šã ã‘ã‚’æŠ½å‡ºã—ã¾ã™ã€‚</li>
    <li><b>ã¼ã‹ã—å‡¦ç†ï¼š</b> <code>cv2.GaussianBlur</code> ã§ãƒã‚¤ã‚ºã‚’æ¸›ã‚‰ã—ã¦ç·šã‚’æ»‘ã‚‰ã‹ã«ã—ã¾ã™ã€‚</li>
    <li><b>ç”»åƒã®ä¸‹éƒ¨åˆ†ã ã‘ã‚’è¦‹ã‚‹ï¼š</b> ä¸‹ã‹ã‚‰40ãƒ”ã‚¯ã‚»ãƒ«ã‚’æŠ½å‡ºï¼ˆROIï¼‰ã—ã¦å‡¦ç†é€Ÿåº¦ã¨ç²¾åº¦ã‚’ä¸Šã’ã¾ã™ã€‚</li>
    <li><b>è¼ªéƒ­ã‚’è¦‹ã¤ã‘ã‚‹ï¼š</b> <code>cv2.findContours</code> ã§é»’ã„éƒ¨åˆ†ã®å½¢ã‚’æ¤œå‡ºã—ã¾ã™ã€‚</li>
    <li><b>é‡å¿ƒã‚’æ±‚ã‚ã‚‹ï¼š</b> é»’ã„ç·šã®ä¸­å¤®åº§æ¨™ã‚’è¨ˆç®—ã—ã¦ã€å·¦å³ã©ã¡ã‚‰ã«ã‚ã‚‹ã‹åˆ¤æ–­ã—ã¾ã™ã€‚</li>
    <li><b>æ–¹å‘ã®æ±ºå®šï¼š</b> 
      <ul>
        <li>ä¸­å¤®ã‚ˆã‚Šå·¦ â†’ "LEFT"</li>
        <li>ä¸­å¤®ã‚ˆã‚Šå³ â†’ "RIGHT"</li>
        <li>ä¸­å¤®ä»˜è¿‘ â†’ "CENTER"</li>
      </ul>
    </li>
  </ol>

  <h4>â‘¤ ãƒ¢ãƒ¼ã‚¿ãƒ¼ã‚’å‹•ã‹ã™é–¢æ•°</h4>
  <p>ã‚«ãƒ¡ãƒ©ã§å¾—ãŸã€Œæ–¹å‘æƒ…å ±ã€ã‚’ã‚‚ã¨ã«ã€ãƒ­ãƒœãƒƒãƒˆã®ãƒ¢ãƒ¼ã‚¿ãƒ¼ã‚’åˆ¶å¾¡ã—ã¾ã™ã€‚</p>
  <ul>
    <li><b>base_speedï¼š</b> åŸºæœ¬é€Ÿåº¦ï¼ˆä¾‹ï¼šã¾ã£ã™ãï¼90ã€æ›²ãŒã‚‹ï¼50ï¼‰ã€‚</li>
    <li><b>diffï¼š</b> å·¦å³ã®ãƒ¢ãƒ¼ã‚¿ãƒ¼ã®å·®ã§æ›²ãŒã‚Šè§’åº¦ã‚’èª¿æ•´ã€‚</li>
    <li>å³ã«ç·šãŒã‚ã‚‹ â†’ å·¦ãƒ¢ãƒ¼ã‚¿ãƒ¼ã‚’é€Ÿãã™ã‚‹ã€‚å·¦ã«ç·šãŒã‚ã‚‹ â†’ å³ãƒ¢ãƒ¼ã‚¿ãƒ¼ã‚’é€Ÿãã™ã‚‹ã€‚</li>
  </ul>

  <h4>â‘¥ ãƒ¡ã‚¤ãƒ³ã®éƒ¨åˆ†ï¼ˆãƒ­ãƒœãƒƒãƒˆã‚’å‹•ã‹ã™è¨­å®šï¼‰</h4>
  <ul>
    <li><code>add_device</code>ï¼šå³ã¨å·¦ã®ãƒ¢ãƒ¼ã‚¿ãƒ¼ã‚’ç™»éŒ²ã€‚</li>
    <li><code>add_handler</code>ï¼šãƒ©ã‚¤ãƒ³è¿½è·¡ã®é–¢æ•°ã‚’ç™»éŒ²ã€‚</li>
    <li><code>dispatch(interval=0.05)</code>ï¼š0.05ç§’ã”ã¨ã«é–¢æ•°ã‚’å‘¼ã³å‡ºã—ã¦åˆ¶å¾¡ã€‚</li>
  </ul>

  <p>ã“ã‚Œã«ã‚ˆã‚Šã€ãƒ­ãƒœãƒƒãƒˆã¯ã‚«ãƒ¡ãƒ©ã®æ˜ åƒã‚’ã‚‚ã¨ã«ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§é»’ç·šã‚’è¿½è·¡ã—ã€è‡ªå‹•èµ°è¡Œã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p>
</div>
    </div>

    <main>

<section id="troubleshooting">
  <h2>ğŸ“Œ ã‚ˆãã‚ã‚‹å•é¡Œã¨ãƒ’ãƒ³ãƒˆ</h2>

  <div class="trouble-box-container">

  <!-- â‘  ã‚«ãƒ¡ãƒ©ãŒèµ·å‹•ã—ãªã„ -->
  <div class="trouble-box">
    <h3>â‘  ğŸ“· ã‚«ãƒ¡ãƒ©ãŒèµ·å‹•ã—ãªã„</h3>
    <p>èµ·å‹•æ™‚ã« <code>RuntimeError</code> ã‚„ <code>Device not found</code> ãŒå‡ºã‚‹å ´åˆâ€¦</p>
    <ul>
      <li>ğŸ”Œ ã‚±ãƒ¼ãƒ–ãƒ«ã®æ¥ç¶šã‚’å†ç¢ºèª</li>
      <li>ğŸ§ª <code>libcamera-hello</code> ã‚’å®Ÿè¡Œã—ã¦ã‚«ãƒ¡ãƒ©èªè­˜ãƒ†ã‚¹ãƒˆ</li>
      <li>ğŸ”„ Raspberry Pi ã‚’å†èµ·å‹•</li>
    </ul>
    <p style="color:#16a34a; font-weight:600;">ğŸ’¡ ä¸€ç•ªå¤šã„åŸå› ã¯ã€Œã‚±ãƒ¼ãƒ–ãƒ«ã®å‘ããƒŸã‚¹ã€ã ã‚ˆï¼</p>
  </div>

  <!-- â‘¡ 2ã¤ç›®ã®ã‚«ãƒ¡ãƒ©ãŒæ˜ ã‚‰ãªã„ -->
  <div class="trouble-box">
    <h3>â‘¡ ğŸ¥ 2ã¤ç›®ã®ã‚«ãƒ¡ãƒ©ãŒæ˜ ã‚‰ãªã„</h3>
    <p>cam0 ã¨ cam1 ã®å‰²ã‚Šå½“ã¦ãŒé€†ã«ãªã£ã¦ã„ã‚‹å¯èƒ½æ€§ğŸ“Œ</p>
    <ul>
      <li>ğŸ” ã‚±ãƒ¼ãƒ–ãƒ«æ¥ç¶šä½ç½®ã®å·¦å³ãƒ»ä¸Šä¸‹ã‚’å†ãƒã‚§ãƒƒã‚¯</li>
      <li>ğŸ§­ Picamera2(0) ã¨ Picamera2(1) ã®ç•ªå·ã‚’å…¥ã‚Œæ›¿ãˆã¦ãƒ†ã‚¹ãƒˆ</li>
    </ul>
    <p style="color:#2b7bd3; font-weight:600;">ğŸ” ã‚«ãƒ¡ãƒ©é †ç•ªã®ç¢ºèªãŒãƒã‚¤ãƒ³ãƒˆï¼</p>
  </div>

  <!-- â‘¢ é»’ãƒ©ã‚¤ãƒ³ã‚’è¦‹å¤±ã† -->
  <div class="trouble-box">
    <h3>â‘¢ ğŸ–¤ é»’ãƒ©ã‚¤ãƒ³ã‚’è¦‹å¤±ã†</h3>
    <ul>
      <li>ğŸ’¡ ç’°å¢ƒå…‰ãŒå¼·ã™ãã¦é»’ã®ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆãŒæ¶ˆãˆã¦ã„ã‚‹</li>
      <li>ğŸ¨ é»’ã® HSV (ç‰¹ã« V ã¨ S) ã®ç¯„å›²ãŒå³ã—ã™ãã‚‹</li>
    </ul>
    <p style="color:#16a34a; font-weight:600;">ğŸ› ï¸ <code>upper_black</code> ã® V ã‚’ 80 â†’ 90ã€œ120 ã«ã™ã‚‹ã¨æ”¹å–„ã™ã‚‹ã“ã¨ãŒå¤šã„ï¼</p>
  </div>

  <!-- â‘£ ãƒ­ãƒœãƒƒãƒˆãŒè›‡è¡Œã™ã‚‹ -->
  <div class="trouble-box">
    <h3>â‘£ ğŸŒ€ ãƒ­ãƒœãƒƒãƒˆãŒè›‡è¡Œã™ã‚‹</h3>
    <p>å·¦å³å·®ï¼ˆ<code>diff</code>ï¼‰ã®å€¤ 55 ãŒå¼·ã™ãã‚‹ã®ãŒåŸå› ã‹ã‚‚ã€‚</p>
    <ul>
      <li>âš™ï¸ <code>diff</code> ã‚’ 35ã€œ45 ã«ä¸‹ã’ã¦ã¿ã‚‹</li>
      <li>ğŸ¯ base_speed ã¨ diff ã®ãƒãƒ©ãƒ³ã‚¹ã‚‚é‡è¦</li>
    </ul>
    <p style="color:#2b7bd3; font-weight:600;">ğŸš— å®‰å®šã—ãŸãƒ©ã‚¤ãƒ³èµ°è¡Œã«ã¯ â€œé©åº¦ãªå·®åˆ†èª¿æ•´â€ ãŒå¤§äº‹ï¼</p>
  </div>

  <!-- â‘¤ é€²è¡Œæ–¹å‘ãŒæ€¥ã«é£›ã¶ -->
  <div class="trouble-box">
    <h3>â‘¤ â†”ï¸ é€²è¡Œæ–¹å‘ãŒæ€¥ã«é£›ã¶</h3>
    <p>è¼ªéƒ­ãƒã‚¤ã‚ºã®å½±éŸ¿ã§ã€cxï¼ˆé‡å¿ƒï¼‰ãŒæš´ã‚Œã¦ã„ã‚‹å¯èƒ½æ€§ã€‚</p>
    <ul>
      <li>ğŸ§¹ ãƒã‚¹ã‚¯ç”»åƒã«ã‚¬ã‚¦ã‚·ã‚¢ãƒ³ãƒ–ãƒ©ãƒ¼ã‚’è¿½åŠ ï¼ˆã‚‚ã†å…¥ã£ã¦ã‚‹ã®ã§å€¤ã‚’å¼·ãã—ã¦ã‚‚OKï¼‰</li>
      <li>ğŸ“ <code>cx</code> åˆ¤å®šé–¾å€¤ï¼ˆÂ±20ï¼‰ã‚’ Â±30ã€œ40 ã«ç·©ã‚ã‚‹</li>
    </ul>
    <p style="color:#16a34a; font-weight:600;">ğŸ§  ãƒã‚¤ã‚ºã«å¼·ã„ â€œã‚†ã‚‹ã‚è¨­å®šâ€ ã«ã™ã‚‹ã¨å®‰å®šã™ã‚‹ï¼</p>
  </div>

  <!-- â‘¥ ãƒ¢ãƒ¼ã‚¿ãƒ¼ãŒå‹•ã‹ãªã„ -->
  <div class="trouble-box">
    <h3>â‘¥ ğŸ”§ ãƒ¢ãƒ¼ã‚¿ãƒ¼ãŒå‹•ã‹ãªã„</h3>
    <p>ãƒãƒ¼ãƒˆè¨­å®šãƒŸã‚¹ or USB èªè­˜ã‚¨ãƒ©ãƒ¼ãŒã‚ˆãã‚ã‚‹åŸå› ã€‚</p>
    <ul>
      <li>ğŸ› ï¸ <code>add_device('right_motor', ..., port='A')</code> ã®ãƒãƒ¼ãƒˆã‚’è¦‹ç›´ã™</li>
      <li>ğŸ”Œ USB ãŒæŠœã‘ã‹ã‘ã¦ã„ãªã„ã‹ãƒã‚§ãƒƒã‚¯</li>
      <li>ğŸ ETRobo ã® backend ãŒ <code>raspike_art</code> ã«ãªã£ã¦ã„ã‚‹ã‹ç¢ºèª</li>
    </ul>
    <p style="color:#2b7bd3; font-weight:600;">ğŸ’¥ ãƒãƒ¼ãƒˆé•ã„ãŒ â€œå‹•ã‹ãªã„ç³»â€ ã®æœ€å¼·åŸå› ï¼</p>
  </div>
  </div>
</section>

</main>

        <!--<video controls>
      <source src="jyuugi_aki.mp4" type="video/mp4"> 
      ãŠä½¿ã„ã®ãƒ–ãƒ©ã‚¦ã‚¶ã¯å‹•ç”»å†ç”Ÿã«å¯¾å¿œã—ã¦ã„ã¾ã›ã‚“ã€‚
    </video>
    <div class="caption">
      ã‚®ãƒ£ãƒƒãƒ—ãƒ©ã‚¤ãƒ³ã‚’èµ°è¡Œã™ã‚‹æ§˜å­ã‚’æ’®å½±ã—ãŸå‹•ç”»ã§ã™ã€‚
    </div>  -->


    <!-- â–¼ å­¦ç¿’ã®ã‚„ã‚Šæ–¹ã‚»ã‚¯ã‚·ãƒ§ãƒ³ â–¼ -->
    <div class="learn-section">
      <h2>ğŸ“˜ å­¦ç¿’ã®ã‚„ã‚Šæ–¹</h2>
      <p>ã‚®ãƒ£ãƒƒãƒ—ãƒ©ã‚¤ãƒ³ãƒˆãƒ¬ãƒ¼ã‚¹ã®å­¦ç¿’ã§ã¯ã€æ¬¡ã®æ‰‹é †ã§ç†è§£ã‚’æ·±ã‚ã¾ã—ã‚‡ã†ã€‚</p>
      <ol class="learn-list">
        <li><b>å‹•ä½œã®ç¢ºèªï¼š</b> ã¾ãšã¯å‹•ç”»ã‚’è¦‹ã¦ã€ãƒ­ãƒœãƒƒãƒˆãŒã©ã®ã‚ˆã†ã«é»’ç·šã‚’ãŸã©ã‚‹ã‹è¦³å¯Ÿã—ã¾ã™ã€‚</li>
        <li><b>ã‚³ãƒ¼ãƒ‰ã®ç†è§£ï¼š</b> å„é–¢æ•°ã®å½¹å‰²ï¼ˆã‚«ãƒ¡ãƒ©å–å¾—ãƒ»ç”»åƒå‡¦ç†ãƒ»ãƒ¢ãƒ¼ã‚¿ãƒ¼åˆ¶å¾¡ï¼‰ã‚’é †ã«èª­ã¿è§£ãã¾ã™ã€‚</li>
        <li><b>å®Ÿé¨“ã¨èª¿æ•´ï¼š</b> é»’ç·šã®å¤ªã•ã‚„ã‚«ãƒ¡ãƒ©ã®ä½ç½®ã‚’å¤‰ãˆã¦ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®åå¿œã‚’è©¦ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</li>
        <li><b>å¿œç”¨ï¼š</b> é€Ÿåº¦ã‚„ã‚«ãƒ¼ãƒ–å‡¦ç†ã®èª¿æ•´ã€ã¾ãŸã¯äº¤å·®ç‚¹å¯¾å¿œã®æ”¹è‰¯ãªã©ã‚’è¡Œã£ã¦ã¿ã¾ã™ã€‚</li>
      </ol>
      <p>å®Ÿéš›ã«ãƒ­ãƒœãƒƒãƒˆã‚’å‹•ã‹ã—ãªãŒã‚‰å­¦ã¶ã“ã¨ã§ã€ã€Œã‚»ãƒ³ã‚µãƒ¼ã€ã¨ã€Œãƒ—ãƒ­ã‚°ãƒ©ãƒ åˆ¶å¾¡ã€ã®é–¢ä¿‚ã‚’æ·±ãç†è§£ã§ãã¾ã™ã€‚</p>
    </div>

  </main>


      <footer>
      <p>&copy; 2025ã€€æ„›çŸ¥å·¥æ¥­å¤§å­¦ã€€æ°´é‡å‹æ•™ç ”ç©¶å®¤ </p>
    </footer>

  </div> <!-- /.wrapper -->

<script>
  function toggleMenu() {
    const sidebar = document.getElementById('sidebar');
    const menuIcon = document.getElementById('menuIcon');
    sidebar.classList.toggle('open');
    menuIcon.classList.toggle('open');
  }

  document.addEventListener('click', function(e) {
    const sidebar = document.getElementById('sidebar');
    const menuIcon = document.getElementById('menuIcon');
    if (!e.target.closest('.sidebar') && !e.target.closest('.menu-icon') && sidebar.classList.contains('open')) {
      sidebar.classList.remove('open');
      menuIcon.classList.remove('open');
    }
  });
</script>


</body>
</html>
